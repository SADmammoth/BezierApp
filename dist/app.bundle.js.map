{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./src/BezierDrawer.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","constructor","canvas","lineWidth","step","this","anchorsCount","directorsCount","anchors","directors","isHolding","lastDirectonLine","lastBezier","canvasLeft","getBoundingClientRect","left","canvasTop","top","start","addEventListener","event","stopImmediatePropagation","addAnchor","pageX","pageY","setDirecton","endBezier","x","y","draw","anchor","drawLine","context","getContext","save","globalCompositeOperation","stroke","restore","path","Path2D","XY","bezierTWO","rect","closePath","fill","bezierTHREE","console","log","bezierFOUR","x1","y1","x2","y2","x3","y3","x4","y4","moveTo","lineTo","undefined","director","document","querySelector"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import BezierDrawer from \"./BezierDrawer.js\";\r\n\r\nlet canvas = document.querySelector('canvas');\r\nlet bezier = new BezierDrawer(canvas, 2, 0.0005);\r\nbezier.start();","export default class BezierDrawer {\r\n  constructor(canvas, lineWidth, step) {\r\n    this.anchorsCount = 0;\r\n    this.directorsCount = 0;\r\n    this.anchors = [{}, {}];\r\n    this.directors = [{}, {}];\r\n    this.isHolding = false;\r\n    this.lineWidth = lineWidth;\r\n    this.step = step;\r\n    this.canvas = canvas;\r\n    this.lastDirectonLine = null;\r\n    this.lastBezier = null;\r\n\r\n    this.canvasLeft = this.canvas.getBoundingClientRect().left;\r\n    this.canvasTop = this.canvas.getBoundingClientRect().top;\r\n  }\r\n\r\n  start() {\r\n    this.canvas.addEventListener('mousedown', () => { event.stopImmediatePropagation(); this.addAnchor(event.pageX - this.canvasLeft, event.pageY - this.canvasTop); this.directorsCount++; this.isHolding = true });\r\n    this.canvas.addEventListener('mousemove', () => this.setDirecton(event.pageX - this.canvasLeft, event.pageY - this.canvasTop));\r\n    this.canvas.addEventListener('mouseout', () => this.endBezier(event.pageX - this.canvasLeft, event.pageY - this.canvasTop));\r\n    this.canvas.addEventListener('mouseup', () => { event.stopImmediatePropagation(); this.endBezier(event.pageX - this.canvasLeft, event.pageY - this.canvasTop); });\r\n  }\r\n\r\n  addAnchor(x, y) {\r\n    this.anchors[this.anchorsCount] = { x, y };\r\n    this.anchorsCount++;\r\n    if (this.anchorsCount === 2) {\r\n      this.draw();\r\n    }\r\n  }\r\n\r\n  setDirecton(x, y) {\r\n    if (this.isHolding) {\r\n      this.directors[this.directorsCount - 1] = { x, y };\r\n      let anchor = this.anchors[this.anchorsCount - 1];\r\n      this.drawLine(2 * anchor.x - x, 2 * anchor.y - y, x, y);\r\n      if (this.anchorsCount === 2) {\r\n        this.draw();\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n\r\n  draw() {\r\n    if (this.lastDirectonLine) {\r\n      let context = this.canvas.getContext('2d');\r\n      context.save();\r\n      context.globalCompositeOperation = \"destination-out\";\r\n      context.lineWidth = 2;\r\n      context.stroke(this.lastBezier);\r\n      context.restore();\r\n\r\n    }\r\n    let path = new Path2D();\r\n    if (this.directorsCount === 0 && this.anchorsCount === 2) {\r\n      for (let t = 0; t <= 1; t += this.step) {\r\n        let XY = this.bezierTWO(this.anchors[0].x, this.anchors[0].y, this.anchors[1].x, this.anchors[1].y, t);\r\n        path.rect(XY.x, XY.y, this.lineWidth, this.lineWidth);\r\n      }\r\n      path.closePath();\r\n      this.canvas.getContext('2d').fill(path);\r\n    }\r\n    if (this.anchorsCount === 2 && this.directorsCount === 1) {\r\n      for (let t = 0; t <= 1; t += this.step) {\r\n\r\n        let XY = this.bezierTHREE(this.anchors[0].x, this.anchors[0].y, this.directors[0].x, this.directors[0].y, this.anchors[1].x, this.anchors[1].y, t);\r\n        path.rect(XY.x, XY.y, this.lineWidth, this.lineWidth);\r\n      }\r\n      path.closePath();\r\n      this.canvas.getContext('2d').fill(path);\r\n    }\r\n    if (this.directors[0] !== {} && this.directors[1] !== {}\r\n      && this.anchors[0] !== {} && this.anchors[1] !== {}) {\r\n      console.log(this.directors);\r\n      for (let t = 0; t <= 1; t += this.step) {\r\n        let XY = this.bezierFOUR(this.anchors[0].x, this.anchors[0].y, this.directors[0].x, this.directors[0].y, this.directors[1].x, this.directors[1].y, this.anchors[1].x, this.anchors[1].y,\r\n          t);\r\n\r\n        path.rect(XY.x, XY.y, this.lineWidth, this.lineWidth);\r\n      }\r\n      path.closePath();\r\n      this.canvas.getContext('2d').fill(path);\r\n    }\r\n    this.lastBezier = path;\r\n  }\r\n\r\n  bezierTWO(x1, y1, x2, y2, t) {\r\n    return {\r\n      x: (1 - t) * x1 + t * x2,\r\n      y: (1 - t) * y1 + t * y2\r\n    };\r\n  }\r\n\r\n  bezierTHREE(x1, y1, x2, y2, x3, y3, t) {\r\n    return {\r\n      x: (1 - t) ** 2 * x1 + 2 * (1 - t) * t * x2 + t ** 2 * x3,\r\n      y: (1 - t) ** 2 * y1 + 2 * (1 - t) * t * y2 + t ** 2 * y3\r\n    };\r\n  }\r\n\r\n  bezierFOUR(x1, y1, x2, y2, x3, y3, x4, y4, t) {\r\n    return {\r\n      x: (1 - t) ** 3 * x1 + 3 * (1 - t) ** 2 * t * x2 + 3 * (1 - t) * t ** 2 * x3 + t ** 3 * x4,\r\n      y: (1 - t) ** 3 * y1 + 3 * (1 - t) ** 2 * t * y2 + 3 * (1 - t) * t ** 2 * y3 + t ** 3 * y4\r\n    };\r\n  }\r\n\r\n  drawLine(x1, y1, x2, y2) {\r\n    let context = this.canvas.getContext('2d');\r\n    if (this.lastDirectonLine) {\r\n      context.save();\r\n      context.globalCompositeOperation = \"destination-out\";\r\n      context.lineWidth = 6;\r\n      context.stroke(this.lastDirectonLine);\r\n      context.restore();\r\n\r\n    }\r\n    let path = new Path2D();\r\n    path.moveTo(x1, y1);\r\n    path.lineTo(x2, y2);\r\n    path.closePath();\r\n    context.stroke(path);\r\n    this.lastDirectonLine = path;\r\n  }\r\n\r\n\r\n  endBezier() {\r\n    this.lastDirectonLine = null;\r\n    this.lastBezier = null;\r\n    if (this.directorsCount === 1 && (this.directors[0].x === undefined)) {\r\n      this.directorsCount--;\r\n    }\r\n    this.isHolding = false;\r\n    if (this.anchorsCount === 2) {\r\n      this.anchorsCount = 1;\r\n      this.directorsCount = 1;\r\n      this.anchors[0] = this.anchors[1];\r\n      this.anchors[1] = {};\r\n      this.director[0] = this.directors[1];\r\n      this.directors[1] = {};\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":""}