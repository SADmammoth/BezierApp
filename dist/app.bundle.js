!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);new class{constructor(t,e,s){this.anchorsCount=0,this.directorsCount=0,this.anchors=[{},{}],this.directors=[{},{}],this.isHolding=!1,this.lineWidth=e,this.step=s,this.canvas=t,this.lastDirectonLine=null,this.lastBezier=null,this.canvasLeft=this.canvas.getBoundingClientRect().left,this.canvasTop=this.canvas.getBoundingClientRect().top}start(){this.canvas.addEventListener("mousedown",()=>{event.stopImmediatePropagation(),this.addAnchor(event.pageX-this.canvasLeft,event.pageY-this.canvasTop),this.directorsCount++,this.isHolding=!0}),this.canvas.addEventListener("mousemove",()=>this.setDirecton(event.pageX-this.canvasLeft,event.pageY-this.canvasTop)),this.canvas.addEventListener("mouseout",()=>this.endBezier(event.pageX-this.canvasLeft,event.pageY-this.canvasTop)),this.canvas.addEventListener("mouseup",()=>{event.stopImmediatePropagation(),this.endBezier(event.pageX-this.canvasLeft,event.pageY-this.canvasTop)})}addAnchor(t,e){this.anchors[this.anchorsCount]={x:t,y:e},this.anchorsCount++,2===this.anchorsCount&&this.draw()}setDirecton(t,e){if(this.isHolding){this.directors[this.directorsCount-1]={x:t,y:e};let s=this.anchors[this.anchorsCount-1];this.drawLine(2*s.x-t,2*s.y-e,t,e),2===this.anchorsCount&&this.draw()}}draw(){if(this.lastDirectonLine){let t=this.canvas.getContext("2d");t.save(),t.globalCompositeOperation="destination-out",t.lineWidth=2,t.stroke(this.lastBezier),t.restore()}let t=new Path2D;if(0===this.directorsCount&&2===this.anchorsCount){for(let e=0;e<=1;e+=this.step){let s=this.bezierTWO(this.anchors[0].x,this.anchors[0].y,this.anchors[1].x,this.anchors[1].y,e);t.rect(s.x,s.y,this.lineWidth,this.lineWidth)}t.closePath(),this.canvas.getContext("2d").fill(t)}if(2===this.anchorsCount&&1===this.directorsCount){for(let e=0;e<=1;e+=this.step){let s=this.bezierTHREE(this.anchors[0].x,this.anchors[0].y,this.directors[0].x,this.directors[0].y,this.anchors[1].x,this.anchors[1].y,e);t.rect(s.x,s.y,this.lineWidth,this.lineWidth)}t.closePath(),this.canvas.getContext("2d").fill(t)}if(this.directors[0]!=={}&&this.directors[1]!=={}&&this.anchors[0]!=={}&&this.anchors[1]!=={}){console.log(this.directors);for(let e=0;e<=1;e+=this.step){let s=this.bezierFOUR(this.anchors[0].x,this.anchors[0].y,this.directors[0].x,this.directors[0].y,this.directors[1].x,this.directors[1].y,this.anchors[1].x,this.anchors[1].y,e);t.rect(s.x,s.y,this.lineWidth,this.lineWidth)}t.closePath(),this.canvas.getContext("2d").fill(t)}this.lastBezier=t}bezierTWO(t,e,s,i,n){return{x:(1-n)*t+n*s,y:(1-n)*e+n*i}}bezierTHREE(t,e,s,i,n,r,o){return{x:(1-o)**2*t+2*(1-o)*o*s+o**2*n,y:(1-o)**2*e+2*(1-o)*o*i+o**2*r}}bezierFOUR(t,e,s,i,n,r,o,h,a){return{x:(1-a)**3*t+3*(1-a)**2*a*s+3*(1-a)*a**2*n+a**3*o,y:(1-a)**3*e+3*(1-a)**2*a*i+3*(1-a)*a**2*r+a**3*h}}drawLine(t,e,s,i){let n=this.canvas.getContext("2d");this.lastDirectonLine&&(n.save(),n.globalCompositeOperation="destination-out",n.lineWidth=6,n.stroke(this.lastDirectonLine),n.restore());let r=new Path2D;r.moveTo(t,e),r.lineTo(s,i),r.closePath(),n.stroke(r),this.lastDirectonLine=r}endBezier(){this.lastDirectonLine=null,this.lastBezier=null,1===this.directorsCount&&void 0===this.directors[0].x&&this.directorsCount--,this.isHolding=!1,2===this.anchorsCount&&(this.anchorsCount=1,this.directorsCount=1,this.anchors[0]=this.anchors[1],this.anchors[1]={},this.director[0]=this.directors[1],this.directors[1]={})}}(document.querySelector("canvas"),2,5e-4).start()}]);
//# sourceMappingURL=app.bundle.js.map